version: '3'

services:

  ems-database:
    image: mariadb/server:10.3.13
    container_name: ems-database
#    volumes:
#      - ems-database-data:/var/lib/mariadb
    ports:
      - '3306:3306'
    environment:
      MYSQL_ROOT_PASSWORD: emspass

  audit-database:
    image: docker.elastic.co/elasticsearch/elasticsearch:7.7.0
    container_name: audit-database
    ports:
      - '9200:9200'
    environment:
      - discovery.type=single-node

  audit-analyzer:
    image: docker.elastic.co/kibana/kibana:7.7.0
    container_name: audit-analyzer
    ports:
      - '5601:5601'
    depends_on:
      - audit-database
    environment:
      ELASTICSEARCH_HOSTS: 'http://audit-database:9200'

#volumes:
#  ems-database-data:
