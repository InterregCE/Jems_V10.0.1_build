<app-breadcrumb></app-breadcrumb>
<h2>{{'call.header' | translate}}</h2>

<div *ngxPermissionsExcept="Permission.APPLICANT_USER">
    <button mat-raised-button color="primary"
            [routerLink]="'/app/call/create'">
        + {{'call.add.new' | translate}}
    </button>
    <div *ngIf="currentPage$ | async as callPage">
        <h4>{{'call.list.header' | translate}}</h4>
        <app-template-card [componentId]="CallPageComponent.ID"></app-template-card>
        <app-call-list
                [isApplicant]="false"
                [callPage]="callPage"
                [pageIndex]="newPageIndex$ | async"
                (newPageSize)="newPageSize$.next($event)"
                (newPageIndex)="newPageIndex$.next($event)"
                (newSort)="newSort$.next($event)">
        </app-call-list>
    </div>
</div>

<div *ngxPermissionsOnly="Permission.APPLICANT_USER">
    <div *ngIf="currentPage$ | async as callPage">
        <h4>{{'call.list.open.title' | translate}}</h4>
        <app-call-list
                [isApplicant]="true"
                [callPage]="callPage"
                [pageIndex]="newPageIndex$ | async"
                (newPageSize)="newPageSize$.next($event)"
                (newPageIndex)="newPageIndex$.next($event)"
                (newSort)="newSort$.next($event)">
        </app-call-list>
    </div>
</div>
