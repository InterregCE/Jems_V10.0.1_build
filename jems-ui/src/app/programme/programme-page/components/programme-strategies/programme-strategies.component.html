<form appFormLayout [formGroup]="programmeStrategyForm">
    <div appMultiColumnRow>
        <h3 class="mb-0">{{'programme.strategy.title' | translate}}</h3>
        <button *ngIf="formState === FormState.VIEW" mat-raised-button color="primary"
                (click)="changeFormState$.next(FormState.EDIT)">
            {{'programme.strategy.button.edit' | translate}}
        </button>
    </div>
    <div>
        <div *ngFor="let element of strategies">
            <mat-checkbox
                    (click)="$event.stopPropagation()"
                    (change)="selection.toggle(element)"
                    [disabled]="formState === FormState.VIEW || ((programmeEditableStateStore.isProgrammeEditableDependingOnCall$ | async) && initialSelection.isSelected(element))"
                    [checked]="selection.isSelected(element)">
                {{'programme.strategy.' + element.strategy | translate}}
            </mat-checkbox>
        </div>
    </div>
    <div appMultiColumnRow *ngIf="formState === FormState.EDIT">
        <button mat-stroked-button
                type="button"
                (click)="onCancel()">
            {{'programme.strategy.button.cancel' | translate}}
        </button>
        <button mat-raised-button
                color="primary"
                type="button"
                [disabled]="submitted"
                (click)="onSubmit()">
            {{'programme.strategy.button.save' | translate}}
        </button>
    </div>


    <app-alert
            [show]="!submitted && (showSuccessMessage$ | async)"
            [type]="Alert.SUCCESS">
        <p>{{'programme.strategy.message.successful' | translate}}</p>
    </app-alert>
    <app-alert *ngIf="error$ | async as error"
               [show]="!!error.i18nMessage?.i18nKey"
               [type]="Alert.ERROR">
        <app-api-error-content [error]="error"></app-api-error-content>
    </app-alert>

</form>
