<app-project-page-template *ngIf="projectDetailStore.project$ | async as project" [needsCard]="true"
                           titleKey="project.application.form.lifecycle.title">
    <div appFormLayout>

        <div appNoWidthLimit>
            <h2>{{project.id}} - {{project.acronym}}</h2>
            <app-project-application-information [project]="project" appNoWidthLimit>
            </app-project-application-information>
        </div>

        <app-project-application-actions appNoWidthLimit></app-project-application-actions>

        <ng-container *ngIf="projectDetailStore.preConditionCheckResult$ | async as results">
            <app-project-application-pre-condition-check-result
                    [preConditionCheckResult]="results"
                    appNoWidthLimit></app-project-application-pre-condition-check-result>
        </ng-container>

        <div *hasPermission="PermissionsEnum.ProjectAssessmentView" appFormLayout id="project-detail-container">
            <ng-container *ngIf="projectDetailStore.callHasTwoSteps$ | async">
                <app-project-application-decisions appNoWidthLimit step="1">
                </app-project-application-decisions>
                <app-project-application-assessments [decisions]="project.firstStepDecision"
                                                     [projectStatus]="project.projectStatus"
                                                     appNoWidthLimit
                                                     step="1">
                </app-project-application-assessments>
            </ng-container>

            <ng-container *ngIf="project.step2Active && project.projectStatus.status !== StatusEnum.DRAFT">
                <app-project-application-decisions appNoWidthLimit step="2">
                </app-project-application-decisions>
                <app-project-application-assessments [decisions]="project.secondStepDecision"
                                                     [projectStatus]="project.projectStatus"
                                                     appNoWidthLimit
                                                     step="2">
                </app-project-application-assessments>
            </ng-container>
        </div>

        <h3>
            {{'file.tab.header' | translate}}
            <app-context-info *ngIf="projectDetailStore.callHasTwoSteps$ | async"
                              infoPosition="right"
                              infoText="{{'file.tab.info' | translate}}">
            </app-context-info>
        </h3>
        <app-file-management appNoWidthLimit></app-file-management>
    </div>
</app-project-page-template>
