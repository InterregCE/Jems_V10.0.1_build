<app-project-page-template [needsCard]="true" *ngIf="details$ | async as details"
                           titleKey="project.assessment.and.decision.header"
                           [isVersionedData]="false">

    <div page-sub-title appNoWidthLimit appFormLayout>
        <h2>{{details.currentVersionOfProjectTitle}}</h2>
        <app-project-application-information appNoWidthLimit [project]="details.currentVersionOfProject">
        </app-project-application-information>
    </div>

    <div appFormLayout>
        <h3>{{'project.assessment.fundingDecision.dialog.title' | translate}}</h3>
        <app-project-application-funding-decision
                appNoWidthLimit
                *ngIf="details.showSecondDecision"
                [currentVersionOfProject]="details.currentVersionOfProject"
                [currentVersionOfProjectStatus]="details.finalFundingDecision"
                [userCanChangeFunding]="details.userCanChangeFunding"
                [stepStatus]="stepStatus"
                [fundingDecision]="details.finalFundingDecision"
                [eligibilityDecisionDate]="details.eligibilityDecisionDate"
                [options]="details.optionsForSecondDecision"
                [submitLabel]="'project.assessment.fundingDecision.submit.finalize.label'">
        </app-project-application-funding-decision>
        <app-project-application-funding-decision
                appNoWidthLimit
                [currentVersionOfProject]="details.currentVersionOfProject"
                [currentVersionOfProjectStatus]="step === '2' ? (details.preFundingDecision || details.finalFundingDecision) : details.finalFundingDecision"
                [userCanChangeFunding]="details.userCanChangeFunding"
                [stepStatus]="stepStatus"
                [fundingDecision]="step === '2' ? (details.preFundingDecision || details.finalFundingDecision) : details.finalFundingDecision"
                [eligibilityDecisionDate]="details.eligibilityDecisionDate"
                [options]="details.fullOptions"
                [submitLabel]="'project.assessment.fundingDecision.submit.label'">
        </app-project-application-funding-decision>
    </div>
</app-project-page-template>
