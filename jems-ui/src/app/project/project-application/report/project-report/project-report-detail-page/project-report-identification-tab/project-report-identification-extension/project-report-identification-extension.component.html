<jems-form *ngIf="reportIdentification$ | async as reportIdentification"
           (discard)="resetForm(reportIdentification)"
           (save)="saveIdentificationExtension()">
    <form [formGroup]="form" jemsFormLayout>
        <h3>{{'project.application.project.report.highlights.of.main.achievements.title' | translate}}</h3>
        <p>{{'project.application.project.report.highlights.of.main.achievements.explanation' | translate}}</p>

        <jems-multi-language-container *ngIf="!languageStore.isInputLanguageExist(this.LANGUAGE.EN)"
                                       [staticLanguages]="[LANGUAGE.EN]">
            <jems-multi-language-form-field
                    formControlName="highlightsEn"
                    label="project.application.form.field.project.summary.in.english"
                    [maxLength]="5000"
                    type="textarea">
            </jems-multi-language-form-field>
        </jems-multi-language-container>

        <jems-multi-language-container>
            <jems-multi-language-form-field
                    [maxLength]="5000"
                    formControlName="highlights"
                    type="textarea">
            </jems-multi-language-form-field>
        </jems-multi-language-container>

        <h3>{{'project.application.project.report.partner.problems.and.deviations.title' | translate}}</h3>
        <p>{{'project.application.project.report.partner.problems.explanation' | translate}}</p>

        <jems-multi-language-container>
            <jems-multi-language-form-field
                    [maxLength]="5000"
                    formControlName="partnerProblems"
                    type="textarea">
            </jems-multi-language-form-field>
        </jems-multi-language-container>

        <p>{{'project.application.project.report.deviations.explanation' | translate}}</p>
        <jems-multi-language-container>
            <jems-multi-language-form-field
                    [maxLength]="5000"
                    formControlName="deviations"
                    type="textarea">
            </jems-multi-language-form-field>
        </jems-multi-language-container>

        <ng-container *ngIf="reportIdentification.targetGroups?.length > 0">
            <h3>{{'project.application.project.report.target.groups.title' | translate}}</h3>
            <p>{{'project.application.project.report.target.groups.explanation' | translate}}</p>

            <jems-multi-language-container>
                <div formArrayName="targetGroups" [jemsTableConfig]="[{maxInRem: 20},{}]">
                    <div>
                        <span class="mat-body-strong">{{ 'project.application.form.relevance.target.group' | translate }}</span>
                        <span class="mat-body-strong">{{ 'project.application.partner.report.target.group.description' | translate }}</span>
                    </div>
                    <div *ngFor="let targetGroup of reportIdentification.targetGroups;let i=index">
                        <ng-container >
                            <ng-container [formGroupName]="i">
                                <span>{{'project.application.form.relevance.target.group.' + targetGroup.type | translate}}</span>
                                <div>
                                    <jems-multi-language-form-field
                                            label="common.textarea.enter.text"
                                            type="textarea"
                                            formControlName="description"
                                            maxLength="2000"
                                            minRows="1">
                                    </jems-multi-language-form-field>
                                </div>
                            </ng-container>
                        </ng-container>
                    </div>
                </div>
            </jems-multi-language-container>
        </ng-container>
    </form>
</jems-form>
