<jems-project-page-template *ngIf="pageStore.projectTitle$ | async as title"
                           [titleText]="'project.application.form.acronym' | translate : {projectTitle: title} "
                           subTitleKey="project.application.form.section.privileges">
    <jems-alert [show]="true"
               [closable]="false"
               [type]="Alert.WARNING">
        <p>{{'project.application.form.section.privileges.warning' | translate}}</p>
    </jems-alert>

    <ng-container *ngIf="projectCollaborators$ | async as projectCollaborators">
        <jems-application-form-privileges-expansion-panel
                [projectTitle]="projectCollaborators.projectTitle"
                [projectCollaboratorsData]="projectCollaborators.projectCollaborators">
        </jems-application-form-privileges-expansion-panel>
</ng-container>

    <ng-container *ngIf="this.partnerStore.partnerSummaries$ | async as partnerList">
        <ng-container *ngIf="partnerCollaborators$ | async as partnerCollaborators">
            <ng-container *ngFor="let partner of partnerList">
                <jems-partner-team-privileges-expansion-panel
                        [partnerCollaboratorsData]="getPartnerCollaboratorData(partner, partnerCollaborators.partnerCollaborators, partnerCollaborators.managementLevel)"
                        [managementLevel]="partnerCollaborators.managementLevel"
                        [canCollaboratorSeeTeams]="projectStore.areCollaboratorsAllowedToSeeTeams$ | async">
                </jems-partner-team-privileges-expansion-panel>
            </ng-container>
        </ng-container>
    </ng-container>

</jems-project-page-template>
