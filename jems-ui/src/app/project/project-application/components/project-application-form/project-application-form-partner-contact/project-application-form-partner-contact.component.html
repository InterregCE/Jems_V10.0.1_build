<jems-form *ngIf="partner$ | async as partner"
          (save)="onSubmit()"
          (discard)="resetForm(partner)">
    <form jemsFormLayout [formGroup]="partnerContactForm">
        <ng-container *jemsFormFieldVisibilityStatus="APPLICATION_FORM.SECTION_B.CONTACT.LEGAL_REPRESENTATIVE">
            <h3>{{'project.partner.representative.header' | translate}}</h3>

            <mat-form-field class="w-100"
                            *jemsFormFieldVisibilityStatus="APPLICATION_FORM.SECTION_B.CONTACT.LEGAL_REPRESENTATIVE.TITLE">
                <mat-label>{{'project.partner.representative.title' | translate}}</mat-label>
                <input #partnerRepresentativeTitleInput name="partnerRepresentativeTitle"
                       formControlName="partnerRepresentativeTitle" matInput>
                <mat-hint [jemsHintFor]="partnerRepresentativeTitleInput"
                          [hide]="partnerContactForm.controls?.partnerRepresentativeTitle?.errors !== null">
                    <jems-text-hint [currentLength]="partnerRepresentativeTitleInput?.value?.length"
                                   [maxLength]="25"></jems-text-hint>
                </mat-hint>
                <mat-error>
                    <jems-form-field-errors
                            [errors]="partnerContactForm?.controls?.partnerRepresentativeTitle?.errors">
                    </jems-form-field-errors>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="w-100"
                            *jemsFormFieldVisibilityStatus="APPLICATION_FORM.SECTION_B.CONTACT.LEGAL_REPRESENTATIVE.FIRST_NAME">
                <mat-label>{{'project.partner.representative.first.name' | translate}}</mat-label>
                <input #partnerRepresentativeFirstNameInput name="partnerRepresentativeFirstName"
                       formControlName="partnerRepresentativeFirstName" matInput>
                <mat-hint [jemsHintFor]="partnerRepresentativeFirstNameInput"
                          [hide]="partnerContactForm.controls?.partnerRepresentativeFirstName?.errors !== null">
                    <jems-text-hint [currentLength]="partnerRepresentativeFirstNameInput?.value?.length"
                                   [maxLength]="50"></jems-text-hint>
                </mat-hint>
                <mat-error>
                    <jems-form-field-errors
                            [errors]="partnerContactForm?.controls?.partnerRepresentativeFirstName?.errors">
                    </jems-form-field-errors>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="w-100"
                            *jemsFormFieldVisibilityStatus="APPLICATION_FORM.SECTION_B.CONTACT.LEGAL_REPRESENTATIVE.LAST_NAME">
                <mat-label>{{'project.partner.representative.last.name' | translate}}</mat-label>
                <input #partnerRepresentativeLastNameInput name="partnerRepresentativeLastName"
                       formControlName="partnerRepresentativeLastName" matInput>
                <mat-hint [jemsHintFor]="partnerRepresentativeLastNameInput"
                          [hide]="partnerContactForm.controls?.partnerRepresentativeLastName?.errors !== null">
                    <jems-text-hint [currentLength]="partnerRepresentativeLastNameInput?.value?.length"
                                   [maxLength]="50"></jems-text-hint>
                </mat-hint>
                <mat-error>
                    <jems-form-field-errors
                            [errors]="partnerContactForm?.controls?.partnerRepresentativeLastName?.errors">
                    </jems-form-field-errors>
                </mat-error>
            </mat-form-field>
        </ng-container>
        <ng-container *jemsFormFieldVisibilityStatus="APPLICATION_FORM.SECTION_B.CONTACT.CONTACT_PERSON">
            <h3>{{'project.partner.contact.header' | translate}}</h3>

            <mat-form-field class="w-100"
                            *jemsFormFieldVisibilityStatus="APPLICATION_FORM.SECTION_B.CONTACT.CONTACT_PERSON.TITLE">
                <mat-label>{{'project.partner.contact.title' | translate}}</mat-label>
                <input #partnerContactTitleInput name="partnerContactTitle" formControlName="partnerContactTitle"
                       matInput>
                <mat-hint [jemsHintFor]="partnerContactTitleInput"
                          [hide]="partnerContactForm.controls?.partnerContactTitle?.errors !== null">
                    <jems-text-hint [currentLength]="partnerContactTitleInput?.value?.length"
                                   [maxLength]="25"></jems-text-hint>
                </mat-hint>
                <mat-error>
                    <jems-form-field-errors
                            [errors]="partnerContactForm?.controls?.partnerContactTitle?.errors">
                    </jems-form-field-errors>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="w-100"
                            *jemsFormFieldVisibilityStatus="APPLICATION_FORM.SECTION_B.CONTACT.CONTACT_PERSON.FIRST_NAME">
                <mat-label>{{'project.partner.contact.first.name' | translate}}</mat-label>
                <input #partnerContactFirstNameInput name="partnerContactFirstName"
                       formControlName="partnerContactFirstName" matInput>
                <mat-hint [jemsHintFor]="partnerContactFirstNameInput"
                          [hide]="partnerContactForm.controls?.partnerContactFirstName?.errors !== null">
                    <jems-text-hint [currentLength]="partnerContactFirstNameInput?.value?.length"
                                   [maxLength]="50"></jems-text-hint>
                </mat-hint>
                <mat-error>
                    <jems-form-field-errors
                            [errors]="partnerContactForm?.controls?.partnerContactFirstName?.errors">
                    </jems-form-field-errors>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="w-100"
                            *jemsFormFieldVisibilityStatus="APPLICATION_FORM.SECTION_B.CONTACT.CONTACT_PERSON.LAST_NAME">
                <mat-label>{{'project.partner.contact.last.name' | translate}}</mat-label>
                <input #partnerContactLastNameInput name="partnerContactLastName"
                       formControlName="partnerContactLastName"
                       matInput>
                <mat-hint [jemsHintFor]="partnerContactLastNameInput"
                          [hide]="partnerContactForm.controls?.partnerContactLastName?.errors !== null">
                    <jems-text-hint [currentLength]="partnerContactLastNameInput?.value?.length"
                                   [maxLength]="50"></jems-text-hint>
                </mat-hint>
                <mat-error>
                    <jems-form-field-errors
                            [errors]="partnerContactForm?.controls?.partnerContactLastName?.errors">
                    </jems-form-field-errors>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="w-100"
                            *jemsFormFieldVisibilityStatus="APPLICATION_FORM.SECTION_B.CONTACT.CONTACT_PERSON.EMAIL">
                <mat-label>{{'project.partner.contact.email' | translate}}</mat-label>
                <input #partnerContactEmailInput name="partnerContactEmail" formControlName="partnerContactEmail"
                       matInput>
                <mat-hint [jemsHintFor]="partnerContactEmailInput"
                          [hide]="partnerContactForm.controls?.partnerContactEmail?.errors !== null">
                    <jems-text-hint [currentLength]="partnerContactEmailInput?.value?.length"
                                   [maxLength]="255"></jems-text-hint>
                </mat-hint>
                <mat-error>
                    <jems-form-field-errors
                            [errors]="partnerContactForm?.controls?.partnerContactEmail?.errors"
                            [messages]="partnerContactEmailErrors">
                    </jems-form-field-errors>
                </mat-error>
            </mat-form-field>

            <mat-form-field class="w-100"
                            *jemsFormFieldVisibilityStatus="APPLICATION_FORM.SECTION_B.CONTACT.CONTACT_PERSON.TELEPHONE">
                <mat-label>{{'project.partner.contact.telephone' | translate}}</mat-label>
                <input #partnerContactTelephoneInput name="partnerContactTelephone"
                       formControlName="partnerContactTelephone" matInput>
                <mat-hint [jemsHintFor]="partnerContactTelephoneInput"
                          [hide]="partnerContactForm.controls?.partnerContactTelephone?.errors !== null">
                    <jems-text-hint [currentLength]="partnerContactTelephoneInput?.value?.length"
                                   [maxLength]="25"></jems-text-hint>
                </mat-hint>
                <mat-error>
                    <jems-form-field-errors
                            [errors]="partnerContactForm?.controls?.partnerContactTelephone?.errors"
                            [messages]="partnerContactTelephoneErrors">
                    </jems-form-field-errors>
                </mat-error>
            </mat-form-field>
        </ng-container>
    </form>
</jems-form>
