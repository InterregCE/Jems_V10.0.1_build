<app-form (save)="onSubmit()"
          (discard)="resetForm()">
    <form [formGroup]="coFinancingForm">
        <h5><span>{{ 'partner.tab.coFinancing' | translate }}</span></h5>

        <p class="intro-text-small mb-3">{{ 'project.partner.coFinancing.intro' | translate }}</p>

        <table class="w-100">
            <tr>
                <th class="text-left">{{ 'project.partner.coFinancing.source' | translate }}</th>
                <th class="text-right">{{ 'project.partner.coFinancing.amount' | translate }}</th>
                <th class="text-right">{{ 'project.partner.coFinancing.percentage' | translate }}</th>
            </tr>
            <tr>
                <td>
                    <mat-form-field class="field w-100">
                        <mat-select [disabled]="!editable"
                                    name="fundId"
                                    panelClass="material-select-panel" formControlName="fundId">
                            <mat-option *ngFor="let fund of callFunds" [value]="fund.id">
                                {{fund.abbreviation || 'programme.fund.abbreviation.' + fund.id | translate}}
                            </mat-option>
                        </mat-select>
                        <mat-error>
                            <app-form-field-errors
                                    [errors]="coFinancingForm?.controls?.fundId?.errors"
                                    [messages]="fundIdErrors">
                            </app-form-field-errors>
                        </mat-error>
                    </mat-form-field>
                </td>
                <td class="text-right">{{ this.fundAmount | asMoney }}</td>
                <td class="text-right">
                <span class="w-100">
                <mat-form-field class="field field-tiny">
                    <input class="text-right" name="percentage" formControlName="percentage" matInput min="0" max="100">
                    <mat-error>
                        <app-form-field-errors
                                [errors]="coFinancingForm?.controls?.percentage?.errors"
                                [messages]="percentageErrors">
                        </app-form-field-errors>
                    </mat-error>
                </mat-form-field>
                %
                </span>
                </td>
            </tr>
            <tr class="thick-row">
                <td class="text-left">{{ 'project.partner.coFinancing.partnerContribution' | translate }}</td>
                <td class="text-right">{{ this.myAmount | asMoney }}</td>
                <td class="text-right">{{ this.myPercentage }} %</td>
            </tr>
            <tr>
                <th class="text-left">{{ 'project.partner.coFinancing.total' | translate }}</th>
                <th class="text-right">{{ this.totalAmount | asMoney }}</th>
                <th class="text-right">100 %</th>
            </tr>
        </table>
    </form>
</app-form>
