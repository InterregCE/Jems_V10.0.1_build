<div appFormLayout [formGroup]="addressForm">
    <mat-form-field *ngIf="nuts">
        <mat-label>{{'project.partner.main-address.country' | translate}}</mat-label>
        <input name="country" formControlName="country" matInput
               [matAutocomplete]="country"
               (focusout)="countryUnfocused($event)">
        <mat-autocomplete #country="matAutocomplete"
                          (optionSelected)="countryChanged($event.option?.value)">
            <mat-option *ngFor="let region of filteredCountry | async" [value]="region">
                {{region}}
            </mat-option>
        </mat-autocomplete>
    </mat-form-field>

    <mat-form-field *ngIf="addressForm.controls.country?.value">
        <mat-label>{{'project.partner.main-address.region2' | translate}}</mat-label>
        <input name="region2" formControlName="region2" matInput
               [matAutocomplete]="region2"
               (focusout)="region2Unfocused($event)">
        <mat-autocomplete #region2="matAutocomplete"
                          (optionSelected)="region2Changed($event.option?.value)">
            <mat-option *ngFor="let region of filteredRegion2 | async" [value]="region">
                {{region}}
            </mat-option>
        </mat-autocomplete>
    </mat-form-field>

    <mat-form-field *ngIf="addressForm.controls.region2?.value">
        <mat-label>{{'project.partner.main-address.region3' | translate}}</mat-label>
        <input name="region3" formControlName="region3" matInput
               [matAutocomplete]="region3"
               (focusout)="region3Unfocused($event)">
        <mat-autocomplete #region3="matAutocomplete">
            <mat-option *ngFor="let region of filteredRegion3 | async" [value]="region">
                {{region}}
            </mat-option>
        </mat-autocomplete>
    </mat-form-field>

    <app-input-hint-decorator [maxLength]="50" [hasErrors]="addressForm.controls?.street?.errors !== null">
        <mat-form-field class="w-100">
            <mat-label>{{'project.partner.main-address.street' | translate}}</mat-label>
            <input name="street" formControlName="street" matInput>
            <mat-error>
                <app-form-field-errors
                        [errors]="addressForm?.controls?.street?.errors">
                </app-form-field-errors>
            </mat-error>
        </mat-form-field>
    </app-input-hint-decorator>

    <app-input-hint-decorator [maxLength]="20" [hasErrors]="addressForm.controls?.houseNumber?.errors !== null">
        <mat-form-field class="w-100">
            <mat-label>{{'project.partner.main-address.housenumber' | translate}}</mat-label>
            <input name="houseNumber" formControlName="houseNumber" matInput>
            <mat-error>
                <app-form-field-errors
                        [errors]="addressForm?.controls?.houseNumber?.errors">
                </app-form-field-errors>
            </mat-error>
        </mat-form-field>
    </app-input-hint-decorator>

    <app-input-hint-decorator [maxLength]="20" [hasErrors]="addressForm.controls?.postalCode?.errors !== null">
        <mat-form-field class="w-100">
            <mat-label>{{'project.partner.main-address.postalcode' | translate}}</mat-label>
            <input name="postalCode" formControlName="postalCode" matInput>
            <mat-error>
                <app-form-field-errors
                        [errors]="addressForm?.controls?.postalCode?.errors">
                </app-form-field-errors>
            </mat-error>
        </mat-form-field>
    </app-input-hint-decorator>


    <app-input-hint-decorator [maxLength]="50" [hasErrors]="addressForm.controls?.city?.errors !== null">
        <mat-form-field class="w-100">
            <mat-label>{{'project.partner.main-address.city' | translate}}</mat-label>
            <input name="city" formControlName="city" matInput>
            <mat-error>
                <app-form-field-errors
                        [errors]="addressForm?.controls?.city?.errors">
                </app-form-field-errors>
            </mat-error>
        </mat-form-field>
    </app-input-hint-decorator>

    <app-input-hint-decorator [maxLength]="250" [hasErrors]="addressForm.controls?.homepage?.errors !== null">
        <mat-form-field *ngIf="addressForm.controls?.homepage" class="w-100">
            <mat-label>{{'project.partner.main-address.homepage' | translate}}</mat-label>
            <input name="homepage" formControlName="homepage" matInput>
            <mat-error>
                <app-form-field-errors
                        [errors]="addressForm?.controls?.homepage?.errors">
                </app-form-field-errors>
            </mat-error>
        </mat-form-field>
    </app-input-hint-decorator>
</div>
