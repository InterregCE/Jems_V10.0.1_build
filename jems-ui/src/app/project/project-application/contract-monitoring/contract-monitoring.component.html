<app-project-page-template *ngIf="data$ | async as data" [needsCard]="true"
                           titleKey="project.application.contracting.title"
                           [subTitleText]="'project.application.form.acronym' | translate : {projectTitle: data.currentVersionOfProjectTitle}"
                           [isVersionedData]="false">

    <h3> {{'project.application.contract.monitoring.title' | translate}}</h3>
    <app-pending-button
            [disabled]="data.currentVersionOfProject.projectStatus.status !== STATUS.APPROVED"
            [pending]="actionPending"
            (clicked)="setToContracted(data.currentVersionOfProject.id, data.currentVersionOfProjectTitle)">
        {{'project.application.set.to.contracted' | translate}}
    </app-pending-button>
    <app-context-info    infoText="{{ 'project.application.set.to.contracted.info' | translate }}"
                         infoPosition="right">
    </app-context-info>

    <app-alert *ngIf="error$ | async as error"
               [show]="!!error.i18nMessage?.i18nKey"
               [type]="Alert.ERROR">
        <app-api-error-content [error]="error"></app-api-error-content>
    </app-alert>

    <ng-container *ngIf="showSuccessMessage$ | async as successMessageArg">
        <app-alert
                [show]="successMessageArg"
                [type]="Alert.SUCCESS">
            <p>{{'project.application.set.to.contracted.success.message' | translate : {projectName: successMessageArg} }}</p>
        </app-alert>
    </ng-container>

</app-project-page-template>
