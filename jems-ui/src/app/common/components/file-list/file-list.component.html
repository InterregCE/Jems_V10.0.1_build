<div>
<mat-table
        matSort
        (matSortChange)="this.onSortChange.next($event)"
        [jemsTableConfig]="[{}, {}, {}, {}, {maxInRem:5}, {maxInRem:5}]"
        *ngIf="fileList?.content?.length; else noFiles"
        [dataSource]="dataSource">

    <ng-container matColumnDef="name">
        <mat-header-cell *matHeaderCellDef [mat-sort-header]="'name'">
            <span jemsText maxLines="2">{{'file.table.column.name.name' | translate }}</span>
        </mat-header-cell>
        <mat-cell *matCellDef="let file">
            <div class="text-overflow-ellipsis" [matTooltip]="file?.name"> {{ file?.name }}</div>
        </mat-cell>
    </ng-container>

    <ng-container matColumnDef="location">
        <mat-header-cell *matHeaderCellDef [mat-sort-header]="'type'">
            <span jemsText maxLines="2">{{'file.table.column.name.location' | translate }}</span>
        </mat-header-cell>
        <mat-cell *matCellDef="let file">
            <span class="text-overflow-ellipsis" [matTooltip]="'file.table.column.name.location.' + file?.type | translate"> {{'file.table.column.name.location.' + file?.type | translate}}</span>
        </mat-cell>
    </ng-container>

    <ng-container matColumnDef="uploadDate">
        <mat-header-cell *matHeaderCellDef [mat-sort-header]="'uploaded'">
            <span jemsText maxLines="2">{{'file.table.column.name.timestamp' | translate }}</span>
        </mat-header-cell>
        <mat-cell *matCellDef="let file">
            {{ file?.uploaded | localeDate: 'L' : 'LT'}}
        </mat-cell>
    </ng-container>

    <ng-container matColumnDef="user">
        <mat-header-cell *matHeaderCellDef>
            <span jemsText maxLines="2">{{'file.table.column.name.username' | translate }}</span>
        </mat-header-cell>
        <mat-cell *matCellDef="let file">{{ file?.author?.email }}</mat-cell>
    </ng-container>

    <ng-container matColumnDef="size">
        <mat-header-cell *matHeaderCellDef [mat-sort-header]="'size'" class="justify-end">
            <span jemsText maxWidth="60" maxLines="2">{{'file.table.column.name.size' | translate }}</span>
        </mat-header-cell>
        <mat-cell *matCellDef="let file" class="justify-end">{{  file?.sizeString}}</mat-cell>
    </ng-container>

    <ng-container matColumnDef="actions">
        <mat-header-cell *matHeaderCellDef class="justify-end">
            <span jemsText maxLines="2">{{'file.table.column.name.action' | translate }}</span>
        </mat-header-cell>
        <mat-cell *matCellDef="let file" class="justify-end">

            <button (click)="onDownload.emit(file)"
                    color="primary"
                    mat-icon-button
                    matTooltip="{{'file.table.action.download.tooltip' | translate}}">
                <mat-icon fontSet="material-icons-outlined">file_download</mat-icon>
            </button>
            <span [matTooltip]="'file.table.action.delete.tooltip' | translate">
                <button (click)="onDelete.emit(file)" [disabled]="!file.deletable" color="accent"
                        mat-icon-button>
                    <mat-icon>{{ file.deletable ? 'delete' : 'delete_forever' }}</mat-icon>
                </button>
            </span>
        </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>

</mat-table>

<jems-paginator (pageIndexChanged)="onPageIndexChange.emit($event)"
                (pageSizeChanged)="onPageSizeChange.emit($event)"
                *ngIf="fileList?.content?.length"
                [currentPageIndex]="Tables.DEFAULT_INITIAL_PAGE_INDEX"
                [currentPageSize]="Tables.DEFAULT_INITIAL_PAGE_SIZE"
                [length]="fileList.totalElements">
</jems-paginator>

<ng-template #noFiles>
    <jems-alert [show]="true"
                [type]="Alert.WARNING">
        <p>{{'file.table.no.files' | translate}}</p>
    </jems-alert>
</ng-template>
</div>
