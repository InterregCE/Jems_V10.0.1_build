<div class="menu">
    <div *ngFor="let data of headlines">
        <mat-expansion-panel class="mat-elevation-z0"
                             [expanded]="data.bullets?.length"
                             [disabled]="!data.bullets?.length">
            <mat-expansion-panel-header>
                <mat-panel-title class="level-1">
                    <div [class.link]="data.route" (click)="sideNavService.navigate(data)">
                        <mat-icon *ngIf="data.icon">{{data.icon}}</mat-icon>
                        {{data.headline.i18nKey | translate}}
                    </div>
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div *ngFor="let subtitle of data.bullets" [class.versioned-section]="subtitle.versionedSection" class="level-2">
                <ng-container *ngIf="subtitle.headlineTemplate"
                              [ngTemplateOutlet]="subtitle.headlineTemplate"></ng-container>

                <mat-expansion-panel *ngIf="!subtitle.headlineTemplate"
                                     class="mat-elevation-z0"
                                     [expanded]="subtitle.bullets?.length"
                                     [disabled]="!subtitle.bullets?.length">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <span [class.link]="subtitle.route"  (click)="sideNavService.navigate(subtitle)">
                                <mat-icon *ngIf="subtitle.icon">{{subtitle.icon}}</mat-icon>
                                {{subtitle.headline.i18nKey | translate}}
                            </span>

                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <ul class="level-3" *ngIf="subtitle.bullets?.length">
                        <li *ngFor="let section of subtitle.bullets"
                            (click)="sideNavService.navigate(section)">

                                <span class="link">
                                    {{ section.headline.i18nKey | translate : section.headline.i18nArguments }}</span>
                            <ul class="level-4" *ngIf="section.bullets?.length">
                                <li class="link" *ngFor="let subsection of section.bullets"
                                    (click)="$event.stopPropagation();sideNavService.navigate(subsection)">

                                    <span>{{ subsection.headline.i18nKey | translate : subsection.headline.i18nArguments }}</span>

                                    <mat-chip-list *ngIf="subsection.badgeText" [selectable]="false"
                                                   class="standard-chip-list">
                                        <mat-chip class="standard-chip" disableRipple
                                                  [matTooltip]="subsection.badgeTooltip | translate">{{subsection.badgeText | translate}}</mat-chip>
                                    </mat-chip-list>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </mat-expansion-panel>
            </div>
        </mat-expansion-panel>
        <hr>
    </div>
</div>
