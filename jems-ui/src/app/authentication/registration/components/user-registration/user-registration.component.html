<mat-card class="py-4 px-4">
    <mat-card-content>
        <form appFormLayout [formGroup]="userForm">

            <h1>{{'user.registration.title' | translate}}</h1>

            <mat-form-field>
                <mat-label>{{'user.registration.field.name' | translate}}</mat-label>
                <input name="name" formControlName="name" matInput required>
                <mat-error>
                    <app-form-field-errors
                            [errors]="userForm?.controls?.name?.errors"
                            [messages]="nameErrors">
                    </app-form-field-errors>
                </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>{{'user.registration.field.surname' | translate}}</mat-label>
                <input name="surname" formControlName="surname" matInput required>
                <mat-error>
                    <app-form-field-errors
                            [errors]="userForm?.controls?.surname?.errors"
                            [messages]="surnameErrors">
                    </app-form-field-errors>
                </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>
                    <mat-icon>email</mat-icon>
                    {{'user.registration.field.email' | translate}}</mat-label>
                <input name="email" formControlName="email" matInput required>
                <mat-error>
                    <app-form-field-errors
                            [errors]="userForm?.controls?.email?.errors"
                            [messages]="emailErrors">
                    </app-form-field-errors>
                </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>
                    <mat-icon>lock</mat-icon>
                    {{'user.registration.field.password' | translate}}</mat-label>
                <input [type]="hide ? 'password' : 'text'" name="password" formControlName="password" matInput required>
                <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
                        [attr.aria-pressed]="hide" type="button">
                    <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                </button>
                <mat-error>
                    <app-form-field-errors
                            [errors]="userForm?.controls?.password?.errors"
                            [messages]="passwordErrors">
                    </app-form-field-errors>
                </mat-error>
                <mat-hint>{{'user.registration.field.password.hint' | translate}}</mat-hint>
            </mat-form-field>

            <div appMultiColumnRow>
                <button mat-stroked-button
                        type="button"
                        (click)="redirectToLogin()">
                    {{'user.registration.button.cancel' | translate}}
                </button>
                <button mat-raised-button
                        color="primary"
                        type="button"
                        (click)="onSubmit()"
                        [disabled]="userForm.invalid || submitted">
                    {{'user.registration.button.register' | translate}}
                </button>
            </div>
            <app-alert
                    [show]="!submitted && (showSuccessMessage$ | async)"
                    [type]="Alert.SUCCESS">
                <p>{{'user.registration.save.success' | translate}}</p>
                <br>
                <a class="mat-body-strong" (click)="redirectToLogin()">
                    {{'user.registration.save.success.redirect.login' | translate}}
                </a>
            </app-alert>

            <app-alert *ngIf="error$ | async as error"
                       [show]="!submitted && !!error.i18nKey"
                       [type]="Alert.ERROR">
                <p>{{error.i18nKey | translate}}</p>
            </app-alert>

        </form>
    </mat-card-content>
</mat-card>
